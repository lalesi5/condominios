<div class="ajustesUnidadesCreate">
  <div class="containerInfo" id="advanced-search-form">
    <mat-card *ngFor="let usuario of usuarios">
      <h2>Unidades</h2>
      <h3>Crear Unidades
        <div *ngIf="loading" class="spinner-border float-right" role="status">
          <span class="sr-only">Procesando...</span>
        </div>
      </h3>
      <form [formGroup]='unidadesForm' (ngSubmit)="onCreateUnidades()">
        <div class="form-group">
          <label>Unidad:</label>
          <input type="text" class="form-control" formControlName="unidad"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['unidad'].valid  && unidadesForm.controls['unidad'].touched }">
          <div *ngIf=" unidadesForm.controls['unidad'].touched  && !unidadesForm.controls['unidad'].valid"
            class="invalid-feedback">
            Campo requerido
          </div>
        </div>
        <div class="form-group">
          <label>Cuota: </label>
          <input type="number" class="form-control" formControlName="cuotaUnidad"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['cuotaUnidad'].valid && unidadesForm.controls['cuotaUnidad'].touched }">
          <div *ngIf="form['cuotaUnidad'].errors && form['cuotaUnidad'].touched" class="invalid-feedback">
            <div *ngIf="form['cuotaUnidad'].errors['required']">
              Campo requerido
            </div>
            <div *ngIf="form['cuotaUnidad'].errors['pattern']">
              El campo solo debe contener números!
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Area Unidad (m2): </label>
          <input type="number" class="form-control" formControlName="areaUnidad"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['areaUnidad'].valid && unidadesForm.controls['areaUnidad'].touched }">
          <div *ngIf="form['areaUnidad'].errors && form['areaUnidad'].touched" class="invalid-feedback">
            <div *ngIf="form['areaUnidad'].errors['required']">
              Campo requerido
            </div>
            <div *ngIf="form['areaUnidad'].errors['pattern']">
              El campo solo debe contener números!
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Nombre Residente: </label>
          <input type="text" class="form-control" formControlName="nombreResidente" [(ngModel)]="usuario.name"
            [readonly]="true">
        </div>
        <div class="form-group">
          <label>Apellido Residente: </label>
          <input type="text" class="form-control" formControlName="apellidoResidente" [(ngModel)]="usuario.last_name"
            [readonly]="true">
        </div>
        <div class="form-group">
          <label>Email Residente: </label>
          <input type="text" class="form-control" formControlName="emailResidente" [(ngModel)]="usuario.email"
            [readonly]="true">
        </div>
        <div class="form-group">
          <label>Teléfono del Residente: </label>
          <input type="text" class="form-control" formControlName="telefonoResidente" [(ngModel)]="usuario.phone"
            [readonly]="true">
        </div>
        <div class="clearfix"></div>
        <div class="form-group">
          <label>Nombre del Propietario: </label>
          <input type="text" class="form-control" formControlName="nombrePropietario"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['nombrePropietario'].valid  && unidadesForm.controls['nombrePropietario'].touched }">
          <div
            *ngIf=" unidadesForm.controls['nombrePropietario'].touched && !unidadesForm.controls['nombrePropietario'].valid "
            class="invalid-feedback">
            Campo requerido
          </div>
        </div>
        <div class="form-group">
          <label>Apellido Propietario: </label>
          <input type="text" class="form-control" formControlName="apellidoPropietario"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['apellidoPropietario'].valid  && unidadesForm.controls['apellidoPropietario'].touched }">
          <div
            *ngIf=" unidadesForm.controls['apellidoPropietario'].touched && !unidadesForm.controls['apellidoPropietario'].valid"
            class="invalid-feedback">
            Campo requerido
          </div>
        </div>
        <div class="form-group">
          <label>Email Propietario: </label>
          <input type="text" class="form-control" formControlName="emailPropietario"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['emailPropietario'].valid && unidadesForm.controls['emailPropietario'].touched }">
          <div *ngIf="form['emailPropietario'].errors && form['emailPropietario'].touched" class="invalid-feedback">
            <div *ngIf="form['emailPropietario'].errors['required']">
              Campo requerido
            </div>
            <div *ngIf="form['emailPropietario'].errors['pattern']">
              Por favor ingrese un email válido
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Teléfono del Propietario: </label>
          <input type="number" class="form-control" formControlName="telefonoPropietario"
            [ngClass]="{ 'is-invalid': !unidadesForm.controls['telefonoPropietario'].valid  && unidadesForm.controls['telefonoPropietario'].touched }">
          <div *ngIf="form['telefonoPropietario'].errors" class="invalid-feedback">
            <div *ngIf="form['telefonoPropietario'].errors['pattern']">
              El campo solo debe contener números!
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
        <div class="centrarBotones">
          <button type="submit" class="btn btn-success mr-2 btn-responsive"
            [disabled]="unidadesForm.invalid">Guardar</button>
          <button class="btn btn-primary ml-2 btn-responsive" (click)="onBacktoList()">Volver</button>
        </div>
      </form>
    </mat-card>
  </div>
</div>